---
title: "ハードウェア インベントリの拡張 | System Center Configuration Manager"
description: "System Center Configuration Manager でハードウェア インベントリを拡張する方法について説明します。"
ms.custom: na
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology:
- configmgr-other
ms.tgt_pltfrm: na
ms.topic: get-started-article
ms.assetid: d5bfab4f-c55e-4545-877c-5c8db8bc1891
caps.latest.revision: 10
caps.handback.revision: 0
author: nbigman
ms.author: nbigman
manager: angrobe
translationtype: Human Translation
ms.sourcegitcommit: f777295958e9cbc729e3759d354521c96ae3e8ac
ms.openlocfilehash: 4a42e266c4152145a4a1c291804ff98934671692


---
# <a name="how-to-extend-hardware-inventory-in-system-center-configuration-manager"></a>System Center Configuration Manager でのハードウェア インベントリの拡張方法

*適用対象: System Center Configuration Manager (Current Branch)*

System Center Configuration Manager ハードウェア インベントリは、Windows Management Instrumentation (WMI) を使用して、Windows PC からデバイスに関する情報を読み取ります。 WMI は、エンタープライズ環境の管理情報にアクセスするための業界標準である Web-Based Enterprise Management (WBEM) をマイクロソフトが実装したものです。 以前のバージョンの Configuration Manager では、サイト サーバー上のファイル sms_def.mof を変更してハードウェア インベントリを拡張することができました。 このファイルには、構成マネージャー ハードウェア インベントリで読み取ることができる WMI クラスの一覧が含まれていました。 このファイルを編集すると、既存のクラスを有効および無効にでき、インベントリする新しいクラスを作成することもできました。  

 Configuration.mof ファイルは、クライアント上でハードウェア インベントリによってインベントリするデータ クラスを定義するために使用し、Configuration Manager 2012 から変更されていません。 クライアント システムに存在する既存またはカスタムの WMI リポジトリ データ クラスまたはレジストリ キーをインベントリする、データ クラスを作成できます。  

 また、Configuration.mof ファイルでは、ハードウェア インベントリ時にデバイス情報にアクセスする WMI プロバイダーを定義および登録します。 プロバイダーを登録することによって、使用するプロバイダーの種類とプロバイダーがサポートするクラスが定義されます。  

 たとえば、標準のクライアント ポリシー ポーリング間隔で構成マネージャー クライアントがポリシーを要求すると、ポリシー本文に Configuration.mof が添付されます。 このファイルをクライアントがダウンロードしてコンパイルします。 Configuration.mof ファイルでデータ クラスの追加、変更、または削除が行われると、クライアントは、インベントリ関連のデータ クラスに対して行われたこれらの変更内容を自動的にコンパイルします。 構成マネージャー クライアントで新規または変更されたデータ クラスをインベントリするための追加の操作は必要ありません。 このファイルはプライマリ サイト サーバーの **<CMInstallLocation\>\Inboxes\clifiles.src\hinv\\** にあります。  

 Configuration Manager では、Configuration Manager 2007 で行ったように sms_def.mof ファイルを編集する必要がなくなりました。 代わりに、WMI クラスを有効または無効にし、クライアント設定を使用して、ハードウェア インベントリで収集する新しいクラスを追加できます。 Configuration Manager では、以下の方法を使用してハードウェア インベントリを拡張できます。  

> [!NOTE]  
>  カスタム インベントリ クラスを追加するために Configuration.mof ファイルを手動で変更した場合は、バージョン 1602 への更新時に、これらの変更が上書きされます。 更新後にカスタム クラスを引き続き使用するには、1602 への更新後に、Configuration.mof ファイルの "Added extensions" セクションにカスタム クラスを追加する必要があります。  
> ただし、このセクションの上にある記述は変更しないでください。これらのセクションは Configuration Manager による変更のために予約されています。 カスタム Configuration.mof のバックアップは、  
> **<CM のインストール ディレクトリ\>\data\hinvarchive\\** にあります。  

|メソッド|説明|  
|------------|----------------------|  
|既存のインベントリ クラスを有効または無効にする|Configuration Manager で使用される既定のインベントリ クラスを有効または無効にしたり、指定のクライアントのコレクションからさまざまなハードウェア インベントリ クラスを収集するためのカスタム クライアント設定を作成したりできます。 詳細については、このトピックの手順「 [既存のインベントリ クラスを有効または無効にするには](#BKMK_Enable) 」を参照してください。|  
|新しいインベントリ クラスを追加する|別のデバイスの WMI 名前空間から新しいインベントリ クラスを追加できます。 詳細については、このトピックの手順「 [新しいインベントリ クラスを追加するには](#BKMK_Add) 」を参照してください。|  
|ハードウェア インベントリ クラスをインポートおよびエクスポートする|Configuration Manager コンソールから、インベントリ クラスが含まれている管理オブジェクト フォーマット (MOF) ファイルをインポートおよびエクスポートできます。 詳細については、このトピックの手順「 [ハードウェア インベントリ クラスをインポートするには](#BKMK_Import) 」および手順「 [ハードウェア インベントリ クラスをエクスポートするには](#BKMK_Export) 」を参照してください。|  
|NOIDMIF ファイルを作成する|NOIDMIF ファイルは、Configuration Manager ではインベントリできないクライアント デバイスに関する情報を収集するために使用します。 たとえば、デバイス上にラベルとしてのみ存在するデバイス資産番号情報を収集できます。 NOIDMIF のインベントリは、収集元のクライアント デバイスに自動的に関連付けられます。 詳細については、このトピックの「 [NOIDMIF ファイルを作成するには](#BKMK_NOIDMIF) 」をご覧ください。|  
|IDMIF ファイルを作成する|IDMIF ファイルは、プロジェクター、複写機、ネットワーク プリンターなどの、構成マネージャー クライアントに関連付けられていない組織内の資産に関する情報を収集するために使用します。 詳細については、このトピックの「 [IDMIF ファイルを作成するには](#BKMK_IDMIF) 」をご覧ください。|  

## <a name="procedures-to-extend-hardware-inventory"></a>ハードウェア インベントリを拡張する手順  
 上記の表に示すように、ハードウェア インベントリを拡張するには、次の手順に従います。  

 この手順に従うと、ハードウェア インベントリに既定のクライアント設定を構成して、これらの設定を階層内のすべてのクライアントに適用できます。 これらの設定を一部のクライアントにのみ適用するには、カスタム クライアント デバイス設定を作成して、インベントリするデバイスが含まれているコレクションに割り当てます。 カスタム クライアント設定の作成方法については、「 [How to configure client settings in System Center Configuration Manager](../../../../core/clients/deploy/configure-client-settings.md)」を参照してください。  

###  <a name="a-namebkmkenablea-to-enable-or-disable-existing-inventory-classes"></a><a name="BKMK_Enable"></a> 既存のインベントリ クラスを有効または無効にするには  

1.  Configuration Manager コンソールで、[ **管理**] をクリックします。  

2.  [ **管理** ] ワークスペースで [ **クライアント設定**] をクリックします。  

3.  [既定のクライアント設定 ****] をクリックします。  

4.  **[ホーム]** タブの **[プロパティ]** グループで、 **[プロパティ]**をクリックします。  

5.  [既定のクライアント設定 **** ] ダイアログ ボックスで、[ハードウェア インベントリ ****] をクリックします。  

6.  [デバイス設定 **** ] の一覧で、[クラスの設定 ****] をクリックします。  

7.  [ハードウェア インベントリ クラス **** ] ダイアログ ボックスで、ハードウェア インベントリで収集するクラスおよびクラス プロパティをオンまたはオフにします。 クラスを展開して、そのクラス内の個々のプロパティをオンまたはオフにできます。 個々のクラスを検索するには、[インベントリ クラスの検索 **** ] フィールドを使用します。  

    > [!IMPORTANT]  
    >  構成マネージャー ハードウェア インベントリに新しいクラスを追加すると、収集されてサイト サーバーに送信されるインベントリ ファイルのサイズが大きくなります。 そのため、ネットワークと Configuration Manager サイトのパフォーマンスが低下する可能性があります。 収集するインベントリ クラスのみ有効にしてください。  

8.  [OK **** ] をクリックして変更を保存し、[ハードウェア インベントリ クラス **** ] ダイアログ ボックスを閉じます。  

###  <a name="a-namebkmkadda-to-add-a-new-inventory-class"></a><a name="BKMK_Add"></a> 新しいインベントリ クラスを追加するには  

1.  Configuration Manager コンソールで、[ **管理**] をクリックします。  

    > [!IMPORTANT]  
    >  インベントリ クラスは、既定のクライアント設定を変更して、階層内の最上位のサーバーからのみ追加できます。 このオプションは、カスタム デバイス設定を作成する場合は使用できません。  

2.  [ **管理** ] ワークスペースで [ **クライアント設定**] をクリックします。  

3.  [既定のクライアント設定 ****] をクリックします。  

4.  **[ホーム]** タブの **[プロパティ]** グループで、 **[プロパティ]**をクリックします。  

5.  [既定のクライアント設定 **** ] ダイアログ ボックスで、[ハードウェア インベントリ ****] をクリックします。  

6.  [デバイス設定 **** ] の一覧で、[クラスの設定 ****] をクリックします。  

7.  [ハードウェア インベントリ クラス **** ] ダイアログ ボックスで、[追加 ****] をクリックします。  

8.  [ハードウェア インベントリ クラスの追加 **** ] ダイアログ ボックスで、[接続 ****] をクリックします。  

9. [Windows Management Instrumentation (WMI) に接続 **** ] ダイアログ ボックスで、WMI クラスを取得するコンピューターの名前、およびクラスの取得に使用する WMI 名前空間を指定します。 指定した WMI 名前空間のすべてのクラスを取得する場合は、[繰り返し ****] をクリックします。 接続しているコンピューターがローカル コンピューターでない場合は、リモート コンピューターの WMI へのアクセス許可があるログイン資格情報を指定します。  

10. **[接続]**をクリックします。  

11. **[ハードウェア インベントリ クラスの追加]** ダイアログ ボックスの **[インベントリ クラス]** の一覧で、構成マネージャー ハードウェア インベントリに追加する WMI クラスを選択します。  

12. 選択した WMI クラスに関する情報を編集するには、[編集 ****] をクリックして、[クラスの修飾子 **** ] ダイアログ ボックスに以下の情報を指定します。  

    -   **[表示名]** - リソース エクスプローラーに表示するクラスのフレンドリ名を指定します。  

    -   **[プロパティ]** - WMI クラスの各プロパティを表示する単位を指定します。  

     クラスの各インスタンスを一意に識別できるように、プロパティをキー プロパティとして指定することもできます。 クラスにキーが定義されておらず、クラスの複数のインスタンスがクライアントからレポートされる場合は、見つかった最新のインスタンスのみデータベースに格納されます。  

     プロパティの構成が終了したら、[OK **** ] をクリックして [クラスの修飾子 **** ] ダイアログ ボックスを閉じます。  

13. [OK] をクリックして [ハードウェア インベントリ クラスの追加 **** ] ダイアログ ボックスを閉じます。  

14. [OK **** ] をクリックして [ハードウェア インベントリ クラス **** ] ダイアログ ボックスを閉じます。  

15. [ **OK** ] をクリックして [ **既定のクライアント設定** ] ダイアログ ボックスを閉じます。  

###  <a name="a-namebkmkimporta-to-import-hardware-inventory-classes"></a><a name="BKMK_Import"></a> ハードウェア インベントリ クラスをインポートするには  

1.  Configuration Manager コンソールで、[ **管理**] をクリックします。  

2.  [ **管理** ] ワークスペースで [ **クライアント設定**] をクリックします。  

3.  [既定のクライアント設定 ****] をクリックします。  

    > [!IMPORTANT]  
    >  既定のクライアント設定を変更している場合は、インベントリ クラスのみインポートできます。 ただし、カスタム クライアント設定を使用して、[True **** ] から [False ****] への既存のクラスのプロパティの変更などの、スキーマ変更が含まれていない情報をインポートできます。  

4.  **[ホーム]** タブの **[プロパティ]** グループで、 **[プロパティ]**をクリックします。  

5.  [既定のクライアント設定 **** ] ダイアログ ボックスで、[ハードウェア インベントリ ****] をクリックします。  

6.  [デバイス設定 **** ] の一覧で、[クラスの設定 ****] をクリックします。  

7.  [ハードウェア インベントリ クラス **** ] ダイアログ ボックスで、[インポート ****] をクリックします。  

8.  [インポート **** ] ダイアログ ボックスで、インポートする管理オブジェクト フォーマット (MOF) ファイルを選択し、[OK ****] をクリックします。  

9. [インポートの概要 **** ] ダイアログ ボックスで、インポートする項目を確認したら、[インポート ****] をクリックします。  

###  <a name="a-namebkmkexporta-to-export-hardware-inventory-classes"></a><a name="BKMK_Export"></a> ハードウェア インベントリ クラスをエクスポートするには  

1.  Configuration Manager コンソールで、[ **管理**] をクリックします。  

2.  [ **管理** ] ワークスペースで [ **クライアント設定**] をクリックします。  

3.  [既定のクライアント設定 ****] をクリックします。  

4.  **[ホーム]** タブの **[プロパティ]** グループで、 **[プロパティ]**をクリックします。  

5.  [既定のクライアント設定 **** ] ダイアログ ボックスで、[ハードウェア インベントリ ****] をクリックします。  

6.  [デバイス設定 **** ] の一覧で、[クラスの設定 ****] をクリックします。  

7.  [ハードウェア インベントリ クラス **** ] ダイアログ ボックスで、[エクスポート ****] をクリックします。  

    > [!NOTE]  
    >  クラスをエクスポートする際、現在選択されているすべてのクラスがエクスポートされます。  

8.  [エクスポート **** ] ダイアログ ボックスで、クラスをエクスポートする管理オブジェクト フォーマット (MOF) ファイルを指定し、[保存 ****] をクリックします。  

## <a name="how-to-use-management-information-files-mif-files-to-extend-hardware-inventory"></a>管理情報フォーマット ファイル (MIF ファイル) を使用してハードウェア インベントリを拡張する方法  
 管理情報フォーマット (MIF) ファイルを使用して、Configuration Manager によってクライアントから収集されるハードウェア インベントリ情報を拡張します。 ハードウェアのインベントリ時に、MIF ファイルに保存された情報はクライアント インベントリ レポートに追加され、サイト データベースに保存されます。サイト データベースでは、既定のクライアント インベントリ データを使用するのと同じようにデータを使用できます。 NOIDMIF および IDMIF の 2 種類の MIF ファイルを使用できます。 

> [!IMPORTANT]  
>  MIF ファイルの情報を Configuration Manager データベースに追加する前に、そのクラス情報を作成またはインポートする必要があります。 詳細については、このトピックの「 [新しいインベントリ クラスを追加するには](#BKMK_Add) 」セクションと「 [ハードウェア インベントリ クラスをインポートするには](#BKMK_Import) 」セクションを参照してください。  

###  <a name="a-namebkmknoidmifa-to-create-noidmif-files"></a><a name="BKMK_NOIDMIF"></a> NOIDMIF ファイルを作成するには  
 NOIDMIF ファイルを使用すると、Configuration Manager では通常収集できない、特定のクライアント デバイスに関連付けられている情報をクライアント ハードウェア インベントリに追加できます。 たとえば、多くの企業では、組織内の各コンピューターに資産番号を示すラベルを付けてから、これらのコンピューターを手作業でカタログ化しています。 NOIDMIF ファイルを作成すると、この情報を Configuration Manager データベースに追加してクエリやレポートに使用できます。 NOIDMIF ファイルの作成の詳細については、Configuration Manager の SDK ドキュメントをご覧ください。  

> [!IMPORTANT]  
>  NOIDMIF ファイルを作成するときに、このファイルを ANSI でエンコードされた形式で保存する必要があります。 NOIDMIF ファイルを UTF-8 でエンコードされた形式で保存すると、Configuration Manager で読み取ることができません。  

 NOIDMIF ファイルを作成した後はこのフォルダーに格納 *%windir%***\System32\CCM\Inventory\Noidmifs** 各クライアント上のフォルダーです。 Configuration Manager は、次回のスケジュールされたハードウェア インベントリ サイクル中に、このフォルダーの NODMIF ファイルから情報を収集します。  

###  <a name="a-namebkmkidmifa-to-create-idmif-files"></a><a name="BKMK_IDMIF"></a> IDMIF ファイルを作成するには  
 IDMIF ファイルを使用すると、Configuration Manager では通常インベントリできない、特定のクライアント デバイスに関連付けられていない資産に関する情報を Configuration Manager データベースに追加できます。 たとえば、IDMIFS を使用して、プロジェクター、DVD プレーヤー、複写機、または構成マネージャー クライアントが含まれていないその他の機器に関する情報を収集できます。 IDMIF ファイルの作成の詳細については、Configuration Manager の SDK ドキュメントをご覧ください。  

 IDMIF ファイルを作成した後はこのフォルダーに格納 *%windir%***\System32\CCM\Inventory\Idmifs** クライアント コンピューター上のフォルダーです。 Configuration Manager は、次回のスケジュールされたハードウェア インベントリ サイクル中に、このファイルから情報を収集します。 クラスを追加またはインポートして、ファイルに含まれる情報の新しいクラスを宣言する必要があります。  

> [!NOTE] 
> MIF ファイルは大量のデータを格納することができ、このデータを収集するのはサイトのパフォーマンスに悪影響を与える場合があります。 MIF コレクションは必要なときだけ有効化し、ハードウェア インベントリ設定の **[カスタム MIF ファイルの最大サイズ (KB)]** オプションを構成します。 詳細については、「[System Center Configuration Manager のハードウェア インベントリの概要](introduction-to-hardware-inventory.md)」をご覧ください。



<!--HONumber=Nov16_HO1-->


