---
title: "ユーザーとデバイスのアフィニティへのユーザーとデバイスの関連付け | System Center Configuration Manager"
description: "ユーザーとデバイスのアフィニティにユーザーとデバイスを関連付けて、ユーザーに関連付けられたすべてのデバイスにアプリを自動的に展開します。"
ms.custom: na
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology:
- configmgr-app
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 5b30b0d5-722d-4d4b-9ed7-5a43de315461
caps.latest.revision: 7
caps.handback.revision: 0
author: robstackmsft
ms.author: robstack
manager: angrobe
translationtype: Human Translation
ms.sourcegitcommit: 1134bb2f04152288e72d40b1b1083f415cb4e900
ms.openlocfilehash: bb918eb5f7a69cad47de761a3e95e92926524e3a


---
# <a name="link-users-and-devices-with-user-device-affinity-in-system-center-configuration-manager"></a>System Center Configuration Manager でのユーザーとデバイスのアフィニティへのユーザーとデバイスの関連付け

*適用対象: System Center Configuration Manager (Current Branch)*

System Center Configuration Manager のユーザーとデバイスのアフィニティにより、1 人のユーザーが 1 台以上のデバイスに関連付けられます。 これにより、ユーザーのデバイス名を把握しなくても、アプリケーションをそのユーザーに展開することができます。 この場合、アプリケーションを各ユーザーのデバイスに展開するのではなく、アプリケーションをユーザーに展開します。 ユーザーとデバイスのアフィニティによって、そのユーザーに関連付けられているすべてのデバイスにアプリケーションが自動的にインストールされます。  

 ユーザーが毎日の仕事で使用するデバイスを、通常は、プライマリ デバイスとして定義できます。 ユーザーとデバイスの間にアフィニティを作成すると、アプリの展開の選択肢が増えます。 たとえば、ユーザーが Microsoft Office Visio を必要とする場合、Windows インストーラーの展開を使用して、ユーザーのプライマリ デバイスにインストールすることができます。 ただし、プライマリ デバイスでないデバイスには、Microsoft Office Visiso を仮想アプリケーションとして展開してもかまいません。 また、ユーザーとデバイスのアフィニティを使用すれば、ユーザーがサインインしていないときにユーザーのデバイスにソフトウェアを事前に展開できます。このため、ユーザーがログオンしたときには、アプリは既にインストールされ、実行準備ができています。  

 コンピューターのユーザーとデバイスのアフィニティ情報を管理する必要があります。 ユーザーとデバイスのアフィニティに登録されるモバイル デバイスは Configuration Manager によって自動的に管理されます。  

## <a name="manually-configure-user-device-affinity"></a>ユーザーとデバイスのアフィニティの手動構成  

1.  Configuration Manager コンソールで、**[資産とコンプライアンス]** > **[デバイス]** の順にクリックします。  

3.  リストからデバイスを選択します。 [ホーム **** ] タブの [デバイス **** ] グループで、[プライマリ ユーザーの編集 ****] をクリックします。  

4.  [プライマリ ユーザーの編集 **** ] ダイアログ ボックスで、選択されているデバイスにプライマリ ユーザーとして追加するユーザーの検索と選択を行い、[追加 ****] をクリックします。  

    > [!NOTE]  
    >  [プライマリ ユーザー **** ] リストに、このデバイスのプライマリ ユーザーであるユーザーと、ユーザー デバイス関係の割り当て方法が表示されます。  

## <a name="configure-primary-devices-for-a-user"></a>ユーザーのプライマリ デバイスを構成する  

1.  Configuration Manager コンソールで、**[資産とコンプライアンス]** > **[ユーザー]** の順にクリックします。  

3.  リストからユーザーを選択します。 次に、[デバイス **** ] タブの [プライマリ デバイスの編集 ****] をクリックします。  

4.  [プライマリ デバイスの編集 **** ] ダイアログ ボックスで、選択したユーザーにプライマリ デバイスとして追加するデバイスの検索と選択を行い、[追加 ****] をクリックします。  

    > [!NOTE]  
    >  [プライマリ ユーザー **** ] リストに、このユーザーのプライマリ デバイスとして構成されているデバイスと、各ユーザー デバイス関係の割り当て方法が表示されます。  

## <a name="automatically-create-user-device-affinities-windows-pcs-only"></a>ユーザーとデバイスのアフィニティの自動作成 (Windows PC のみ)  
 Configuration Manager によって、Windows イベント ログからユーザーのログオンに関するデータが読み取られます。 ユーザーとデバイスのアフィニティの自動作成機能を使用するには、Windows イベント ログにログオン イベントを保存できるように、クライアント コンピューターのローカルのセキュリティ ポリシーから次の 2 つの設定を有効にする必要があります。  

-   **アカウント ログオン イベントの監査**  

-   **ログオン イベントの監査**  

 Windows グループ ポリシーを使用してこれらの設定を構成できます。  

> [!IMPORTANT]  
>  エラーによって Windows イベント ログのエントリ数が多数になると、新しいイベント ログが作成される可能性があります。 この場合、Configuration Manager から既存のログオン イベントを使用できなくなることがあります。  
>   
>  Windows XP で [アカウント ログオン イベントの監査 **** ] と [ログオン イベントの監査 **** ] を実行する場合は注意してください。 既定では、アイテム保持ポリシーは 7 日で、多くの場合、セキュリティ イベント ログは、これらのイベントでいっぱいになります。 標準ユーザーは、イベント ログがいっぱいになると、ログオンできなくなります。 この問題を回避するには、セキュリティ ログの [保存方法 **** ] ポリシーを、[必要に応じてイベントを上書きする ****] に設定します。 ユーザーとデバイスのアフィニティ用に十分なデータを許可するには、さらに、[セキュリティ ログの最大サイズ] ポリシーを 5 ～ 20 MB などの適切な値に設定します。  

### <a name="configure-the-site-to-automatically-create-user-device-affinities"></a>ユーザーとデバイスのアフィニティを自動作成するためにサイトを構成する  

1.  Configuration Manager コンソールで、 **[管理]** > **[クライアント設定]** の順にクリックします。  

3.  既定のクライアント設定を変更するには、 **[既定のクライアント設定]**を選択してから、 **[ホーム]** タブの **[プロパティ]** グループで、 **[プロパティ]**をクリックします。 カスタムのクライアント エージェント設定を作成するには、 **[クライアント設定]** ノードを選択してから、 **[ホーム]** タブの **[作成]** グループで、 **[カスタム クライアント デバイス設定の作成]**をクリックします。  

    > [!NOTE]  
    >  規定のクライアント設定を変更すると、階層内のすべてのコンピューターに展開されます。 クライアント設定の構成方法の詳細については、「[System Center Configuration Manager でクライアント設定を構成する方法](../../core/clients/deploy/configure-client-settings.md)」を参照してください。  

4.  [ユーザーとデバイスのアフィニティ ****] のクライアント設定で、以下を構成します。  

    -   **[ユーザーとデバイスのアフィニティ使用状況のしきい値 (分)]** - ユーザーとデバイスのアフィニティが作成されるまでにかかる使用状況の分数を指定します。  

    -   **ユーザーとデバイスのアフィニティ使用状況のしきい値 (日)** - アフィニティ使用状況のしきい値を測定する日数を指定します。  

    -   **使用状況データに基づいてユーザーとデバイスのアフィニティを自動構成する** – ドロップダウン リストから **True** を選択して、サイトが自動的にユーザーとデバイスのアフィニティを作成するようにします。 **False**を選択した場合は、すべてのユーザーとデバイスのアフィニティ割り当てを承認する必要があります。  

    > [!TIP]  
    >  **例:** **[ユーザーとデバイスのアフィニティ使用状況のしきい値 (分)]** に **60** 分を指定し、 **[ユーザーとデバイスのアフィニティ使用状況のしきい値 (日)]** に **5** 日を指定している場合、ユーザーとデバイスのアフィニティを自動的に作成するには、ユーザーは 5 日間に 60 分以上デバイスを使用する必要があります。  
   
ユーザーとデバイスのアフィニティが自動的に作成された後は、Configuration Manager がユーザーとデバイスのアフィニティ使用状況のしきい値の監視を続けます。 デバイスに対するユーザーのアクティビティが構成されたしきい値を下回ると、ユーザーとデバイスのアフィニティは削除されます。 **ユーザーとデバイスのアフィニティのしきい値 (日)** を少なくとも **7** 日の値に構成して、週末などユーザーがログインしていない間に自動的に構成されたユーザーとデバイスのアフィニティが失われないようにします。  

## <a name="import-user-device-affinities-from-a-file"></a>ファイルからのユーザーとデバイスのアフィニティのインポート  
 ユーザーとデバイスのアフィニティを含むファイルをインポートして、多くの関係を一度に作成することがでます。 この手順の場合、対象のデバイスが検出されていて、Configuration Manager データベースにリソースとして存在している必要があります。そうでない場合は、この手順は失敗します。  

1.  Configuration Manager コンソールで、**[資産とコンプライアンス]** > [**ユーザー**] または [**デバイス**] の順にクリックします。  

3.  **[ホーム]** タブの **[作成]** グループで **[ユーザーとデバイスのアフィニティのインポート]**をクリックします。  

4.  **ユーザーとデバイスのアフィニティのインポート ウィザード** の **[マッピングの選択]**のページで、次の情報を指定します。  

    -   **ファイル名** – 間にアフィニティを作成するユーザーとデバイスの一覧を含む CSV (コンマ区切り) ファイルを指定します。 このファイルでは、ユーザーとデバイスの各ペアはコンマで区切られ、それぞれのペアが別々の行になければなりません。 *<ドメイン\>\\<ユーザー名\>*,*デバイスの NetBIOS 名\>* 形式を使用します。  

    -   **列見出しを含むファイル** – コンマ区切り (CSV) ファイルの 1 行目にヘッダー行がある場合に、このオプションを選択すると、ヘッダー行がインポートで無視されます。  

5.  1 行に 3 項目以上が含まれているファイルをインポートする場合は、[列 **** ] と [割り当て **** ] を使用して、ユーザーとデバイスを表す列とインポート中に無視する列を指定することができます。  

6.  [次へ **** ] をクリックして、[ユーザーとデバイスのアフィニティのインポート ウィザード ****] を完了します。  

## <a name="let-end-users-create-a-user-device-affinity"></a>エンド ユーザーにユーザーとデバイスのアフィニティを作成させる  
 これらの手順を使用して、ユーザーがソフトウェア センターから自身のユーザーとデバイスのアフィニティを作成できるようにします。  

### <a name="configure-the-site-to-allow-user-created-user-device-affinity-requests"></a>ユーザーが作成したユーザーとデバイスのアフィニティ要求を許可するようにサイトを構成する  

1.  Configuration Manager コンソールで、 **[管理]** > **[クライアント設定]** の順にクリックします。  

3.  既定のクライアント設定を変更するには、 **[既定のクライアント設定]**を選択してから、 **[ホーム]** タブの **[プロパティ]** グループで、 **[プロパティ]**をクリックします。 カスタムのクライアント エージェント設定を作成するには、 **[クライアント設定]** ノードを選択してから、 **[ホーム]** タブの **[作成]** グループで、 **[カスタム クライアント ユーザー設定の作成]**をクリックします。  

    > [!NOTE]  
    >  規定のクライアント設定を変更すると、階層内のすべてのコンピューターに展開されます。 クライアント設定の構成については、「[Configure client settings](../../core/clients/deploy/configure-client-settings.md)」 (クライアント設定の構成) を参照してください。  

4.  クライアント設定 **[ユーザーとデバイスのアフィニティ]** を選択し、 **[ユーザーがプライマリ デバイスを定義できるようにする]** ボックスの一覧で **[True]**を選択します。  

### <a name="configure-a-user-device-affinity"></a>ユーザーとデバイスのアフィニティを構成する  

1.  [アプリケーション カタログ] で **[マイ システム]**をクリックします。  

2.  [このコンピューターを日常の仕事で使用します] オプションを有効にします。 ****  

## <a name="manage-user-device-affinity-requests-from-users"></a>ユーザーからのユーザーとデバイスのアフィニティ要求の管理  
 クライアント設定の **[使用状況データに基づいてユーザーとデバイスのアフィニティを自動構成する]** が **[False]**に設定されている場合は、すべてのユーザーとデバイスのアフィニティ割り当てを承認する必要があります。  

### <a name="approve-or-reject-a-user-device-affinity-request"></a>ユーザーとデバイスのアフィニティ要求を承認または拒否する  

1.  Configuration Manager コンソールで、[ **資産とコンプライアンス**] をクリックします。  

2.  [資産とコンプライアンス] ワークスペースで、アフィニティ要求を管理するユーザーまたはデバイスを選択します。 ****  

3.  **[ホーム]** タブの **[コレクション]** グループで、 **[アフィニティ要求の管理]**をクリックします。  

4.  **[ユーザーとデバイスのアフィニティ要求の管理]** ダイアログ ボックスで、アフィニティ要求を選択し、 **[承認]** または **[拒否]**をクリックします。  



<!--HONumber=Nov16_HO1-->


